# Templates  
  
**Menu Generation Program**|   
---|---  
  
When creating a new template using **[Template Designer Wizard](Template%20Designer%20Wizard.md)** or modifying an existing template using **[Template Maintenance](Template%20Maintenance.md)**, you can **[Define a Menu](Template%20Designer%20Wizard.htm#definemenus)** to add to a section of the template.

If you want to define a simple menu with static contents, you can enter the individual menu components in the **[Menu Contents](Template%20Designer%20Wizard.htm#contents)** grid (the **[Define Menus](Template%20Designer%20Wizard.htm#definemenus)** window in the Template Designer Wizard or the **[Menus](Template%20Maintenance.htm#menustab)** tab in Template Maintenance). However, situations may arise where other factors need to be considered when creating the menu contents. For example, the data source for the menu changes periodically or security checking needs to be applied to the menu contents. To define a menu that will address these types of situations, you can create a PxPlus program to generate the menu contents and then enter that program name in the _Menu Generation Program_ field in the **[Define Menus](Template%20Designer%20Wizard.htm#definemenus)** window in the Template Designer Wizard or the **[Menus](Template%20Maintenance.htm#menustab)** tab in Template Maintenance. A Menu Generation program eliminates the need to define the menu contents manually. Once the name of a Menu Generation program is entered, you can then specify other menu settings such as layout, border, background color/image, text color, etc.

_(The ability to specify a Menu Generation Program was added in PxPlus 2016.)_

#### **Note:**  
When defining a menu within Template Designer Wizard or Template Maintenance, you must either enter a _Menu Generation Program_ or enter menu contents in the _Menu Contents_ grid. If a _Menu Generation Program_ is entered, the _Menu Contents_ grid will not be available for entry.

This page explains how you can create your Menu Generation program to generate menu contents.

To give you an example, the **_ide_** template was used to generate the interface below. You can select this template in **[Template Maintenance](Template%20Maintenance.md)** and look at the settings on the **Sections** tab. When **Section 2** is selected, the **Section Contents** grid indicates that a menu with _Menu Name=main_ has been defined with its positioning on the bottom of this section, horizontally centered. The **Menus** tab shows that the menu was generated by running the _Menu Generation Program_ ***ide/inomads/imp_ide.mnu**. This section with its menu defined is highlighted below.

> To guide you in creating your Menu Generation program, you may find it helpful to review the code in the ***ide/inomads/imp_ide.mnu** program using **[*IT - Integrated Toolkit](../toolkit1/overview.md)**, **[Ed+](../Ed%20Program%20Editor.md)** or any other program editor.

When iNomads runs a template with custom menu settings defined, the menu data is read from the template's _custom.ini_ file for processing. Each menu and sub-menu is assigned a menu number. If a Menu Generation program has been specified, the iNomads program creates a memory file and passes the file handle _(menu_mem)_ , along with the current menu number _(menu_no)_ , to the Menu Generation program. The Menu Generation program is responsible for populating the memory file, using a specific record format. If sub-menus are required, the value of _menu_no_ may be incremented. When completed, the Menu Generation program will EXIT, allowing the iNomads program to merge the records from the memory file and continue processing.

To receive the _menu_mem_ and _menu_no_ values, every Menu Generation program **_must_** contain the following ENTER statement:

> **ENTER menu_mem,menu_no**

The format for the write to the memory file is:

> **WRITE** _(__menu_mem_ _,_ KEY=_key$)name$,text$,url$_

**_Where:_**

_key$_ |  To conform to the formats of the menus defined in the _custom.ini_ file, the key value must be in the following format: **"[Menu"+STR(**_mnuNo_**:"00")+"_"+STR(**_mnuSeq_**:"00")+"]"** **_Where:_** _mnuNo_ is the menu number.  
_mnuSeq_ is the sequence number for items in the menu. **_Examples:_** [Menu01_03] indicates that this is the key for the third item on Menu One.  
[Menu02_01] indicates that this is the key for the first item on Menu Two (a sub-menu of Menu One).  
---|---  
_name$_ |  Typically is the name of the task used to generate a new menu name for sub-menus.  
_text$_ |  Text to display for the menu selection. See **[Menu Contents](Template%20Maintenance.htm#menucontents)** in **Template Maintenance**.  
_url_ _$_ |  URL value for the menu selection. Can contain a number of values. See **[Menu Contents](Template%20Maintenance.htm#menucontents)** in **Template Maintenance**. **_Examples:_** |  [http://www.pvxplus.com](http://www.pvxplus.com/) |  For displaying a Web page  
---|---  
menu:name |  For a sub-menu  
/inomads?txid=MENU_TRANS _& param1_=VAL1 &_param2_ =VAL2 |  For running an iNomads transaction **_Where:_** |  MENU_TRANS |  An iNomads transaction that must be created in iNomads **[Transaction Maintenance](Transaction%20Maintenance.md)**  
---|---  
_param1, param2_ |  Parameters that can be retrieved using the iNomads _url_arg_ _$_ property  
VAL1, VAL2 |  Values for the parameters _param1_ and _param2_  
  
For the menu generation example above, the ***ide/inomads/imp_ide_mnu** program writes the _url_ _$_ values as:

/inomads?txid=_ide_menu _& task_=TASK_ID

**_Where:_**

_ide_menu |  An iNomads transaction that is defined to run the ***ide/inomads/inomads_mnu** program  
---|---  
TASK_ID |  A task from the _tasks.dat_ file  
  
Since TASK_ID could refer to any number of different task types (program, panel, report, etc.), a program was required that would launch each task when it was selected from the menu on the Web IDE page. The ***ide/inomads/inomads_mnu** program was created, and the value in the _'task'_ parameter was retrieved as _trxName_ _$_ using the following:

trxName$=%inomads'url_arg$("task",ERR=*NEXT)  
  
When the Menu Generation program is completed, an EXIT statement is needed to return to the calling program.
