# Directives

**IOLIST** |  **_Specify Variable List_**  
---|---  
  
##  Format

_Define List:_**IOLIST** {_parm_[:**[**_format_**]**...}

#### **Note:**  
The inner set of brackets enclosing **[** ,_format_**]** are part of the syntax.

**_Where:_**

_parm_ |  Set of parameters to be used in an input/output directive. This includes **[Variables](../PxPlus%20User%20Guide/Language%20Elements/Data%20Types,%20Literals%20and%20Variables/Variables.md)**, **[Literals](../PxPlus%20User%20Guide/Language%20Elements/Data%20Types,%20Literals%20and%20Variables/Literals.md)**, **[Mnemonics](../mnemonics.md)**, **IOL=** options, and/or location functions such as **'@(...)'**.  
---|---  
_format_ |  Defines how the field is formatted. Options include: |  **CHR**(_len_ **[, SEP=**_dlm_**]**) |  Variable length string (Optional **SEP=** clause indicates not to extend beyond _dlm_ character.) When written, trailing spaces will be added or data will be truncated. On reading, trailing spaces will be deleted.  
---|---  
**CHR**(_dlm_**[, SIZ=**_len_**]**) |  Variable length string (Optional **SIZ=** clause indicates when writing, append spaces or truncate to _len_ characters.) When written, the character identified by _dlm_ will be appended.

#### **Note:**  
When reading data from a record to an IOList containing variables with this format, trailing spaces will be stripped.  
  
**DEC( [SEP,SIZ=]**_len_**[,**_scl_**])** |  Fixed length, explicit decimal, sign maintained. Numeric fields are padded with leading spaces. (Optional **SEP,SIZ=** clause allows for padded numeric fields followed by a field separator.)  
**LEN**(_len_ **[, SEP=**_dlm_**]**) |  Variable length string (Optional **SEP=** clause indicates not to extend beyond _dlm_ character.) When written, trailing spaces will be added or data will be truncated.  
**LEN**(_dlm_**[, SIZ=**_len_**]**) |  Variable length string (Optional **SIZ=** clause indicates when writing, append spaces or truncate to _len_ characters.)  When written, the character identified by _dlm_ will be appended.  
**STR**(_dlm_) |  Quoted string.  
**STR**(_+_) |  **_(Used for INPUT Only)_** Special PxPlus format used with WindX data packets. If _parm_ is a **_numeric_** variable, it receives the length of string but does not advance.  
If _parm_ is a **_string_** variable, it receives the string value.  
**BCD**(_len_**[** ,_scl_**]**) |  Packed decimal numeric.  
**BIN**(_len_**[** ,_scl_**]**) |  Binary numeric.  
**INT**(_len_**[** ,_scl_**]**) |  Unsigned integer numeric.  
**NUM**(_len_**[** ,_scl_**]**) |  Fixed length unsigned numeric.  
**SGN**(_len_**[** ,_scl_**]**) |  Fixed length signed numeric. Sign character is trailing.  
|  **_Where:_**  
---  
_len_ |  Length of the field in the record |   
_dlm_ |  String whose first character delimits the field |   
_scl_ |  Optional scaling factor to apply to the number (e.g. 2 indicates that 1.34 is output as 134) |   
The following options define **_data validation_** (each option is separated by a : colon) - see **[Data Validation](iolist.htm#Mark5)**:  
_  
(The options DTE, MAX, MIN, PRC and TBL were added in PxPlus 2017.)_  
**DTE** _(string)_ |  Defines that the variable is a date. Must be in the format as defined by the ODBC DATE-_xxx_ class rules.  
  
**_For string variables only_** , null string is acceptable.  
**MAX** _(n)_ |  Indicates the maximum length (for string) or the maximum value (for numeric).  
**MIN** _(n)_ |  Indicates the minimum length (for string) or the minimum value (for numeric).  
**PRC** _(n)_ |  **_(For Numeric Variables Only)_** Defines the maximum precision.  
**TBL** _(string)_ |  Defines the validation string in accordance with the existing Data Dictionary validation string.  
  
##  Description

Use **IOLIST** to define a common I/O parameter list (IOLIST). The system ignores the **IOLIST** directive when it encounters it during program execution until it is used in conjunction with file I/O directives (e.g. **READ** , **WRITE** , etc.) and composite string definitions. See **[Input and Output Parameters](../PxPlus%20User%20Guide/File%20Handling/Processing%20Data%20Files/Input%20and%20Output%20Parameters.md)**.

#### **Note:**  
**IOLIST** must be the only directive in a statement.

##  Data Validation

If the formatting options **DTE(**_string_**)** , **MAX(**_n_**)** , **MIN(**_n_**)** , **PRC(**_n_**)** and **TBL(**_string_**)** are specified, the system will automatically validate the data when the IOLIST is processed on a **[WRITE](write.md)**, **[UPDATE](update.md)** or **[REC (IOL=)](../functions/rec.md)** function (i.e. when the IOLIST is used to create a record layout).

To create this extended IOLIST, the system will automatically add these options based on the Data Dictionary definition to the IOLIST generated by an **OPEN (,IOL=*)** if an OPT="VALIDATE" is specified on the OPEN, or the Data Dictionary header indicates that it is to be checked. See **[Force Data Validation on WRITE/UPDATE](../Data%20Dictionary/Data%20Dictionary%20Maintenance/Overview.htm#validation)** in Data Dictionary Maintenance.

The rules that determine the validation options that will be added are:

**DTE(**_n_**)** |  **DTE** will be included if the data class is DATE-xxx in accordance with ODBC processing.  
---|---  
**MAX(**_n_**)** |  For numerics, **MAX** is calculated as: 10^digits-10^(0-scale). **_Example:_**  
  
For a variable defined as 6.2: 10^6-10^(0-2)=999999.99 For strings, the field size is used.  
**MIN(**_n_**)** |  For numerics, if no format mask exists or a **-** , **+** , **CR** or **DB** is present in the format mask, **MIN** will be set to the value of the **0-MAX(**_n_**)** value; otherwise, it is set to 0. For strings, if the REQUIRED field flag is set, **MIN(1)** will be defined.  
**PRC(**_n)_ |  **PRC** will be based on the scale for the numeric variable.  
**TBL(**_string_ **)** |  **TBL** will be present if a data dictionary validation string exists.

#### **Note:**  
The **TBL( )** validation rule supports the use of fixed values or expressions. The expression is evaluated when the file is opened. Should the expression fail to evaluate (syntax error, bad data), the file OPEN will fail.  
  
_(Support for the inclusion of expressions in the TBL( ) validation rule was added in PxPlus 2018 Update 1.)_  
  
In the event that a validation fails, an error will be generated:

_For**Numeric** Variable Errors:_ |  The system will generate an Error 41: Invalid integer encountered (range error or non-integer).  
---|---  
_For**String** Errors:_ |  The system will generate the following errors: |  **MAX/MIN** |  Error 46: Length of string invalid  
---|---  
**TBL** |  Error 71: String not found  
**DTE** |  Error 35: Invalid date/time specified  
  
In addition to generating the error, the system will add the following descriptive text to MSG(-1) regarding the specific error:

> _VARIABLE_ too long, exceeds _nn_ char

> _VARIABLE_ less than min value

> _VARIABLE_ cannot be empty

> _VARIABLE_ too short, less than _nn_ char

> _VARIABLE_ invalid PRC( ) validation

> _VARIABLE_ has more than _nn_ decimal places

> _VARIABLE_ has invalid date validation, must use DATE-JUL class

> _VARIABLE_ length > 4 for DATE-????

> _VARIABLE_ class invalid (DATE-JUL????)

> _VARIABLE_ length of date should be _nn_

> _VARIABLE_ is an invalid date

> _VARIABLE_ value invalid, must be _VALIDATION-RULES_

_(Data Validation support was added in PxPlus 2017.)_

##  Example

IOLIST (**_Without Validation_**):

> 0010 open (20)"CSTFLE"  
>  0020 read (20,key=C$)iol=1000  
>  0030 let J=J+10  
>  0040 write (20,key=C$)iol=1000  
>  0050 write (21)iol=1010  
>  ...  
>  1000 iolist C$,C1$,C2$,C3$,J,K,L,M  
>  1010 iolist C$:[chr(10)],C1$:[chr(40)]

IOLIST (**_With Validation_**):

> iolist CST_KEY$:[max(7):min(7)],CST_NAME$:[max(30):min(1)],CST_OWING:[max(99999999.99):prc(2)],CST_TYPE$:[max(1):tbl("A,B,E-H")],CST_CREATED$:[max(8):dte("YYYYMMDD")]
