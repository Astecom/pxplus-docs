# System Functions

**MSG( )** |  **_Return Message Text_**  
---|---  
  
##  Formats

1\. _By Message Number:_ |  **MSG(**_err_msg_ ,[,**ERR=**_stmtref_]**)**  
---|---  
2\. _By Message Key:_ |  **MSG( [ = ]**_msg_key_ _$_ ,[_param1, param2, ..._][,**ERR=**_stmtref_]**)**  
3\. _Message Library Setting:_ |  **MSG(*)**  
4\. _Get OS Error Message:_ |  **MSG( + [ :**_oserrcode_ **]** **)** (added in PxPlus v8.0)  
  
**_Where_**** _:_**

**_*_** |  **MSG(*)** returns the current **MESSAGE_LIB** settings. If more than one **MESSAGE_LIB** is open, the function returns all the open filenames in search order, each separated by the default field separator, **SEP** (e.g. $8A$).  
---|---  
_err_msg_ |  Number of the error message to return. Numeric expression. If _err_msg_ is a positive integer, it returns the associated message (see **[Error Codes and Messages](../appendix/list_of_messages.md)**). If _err_msg_ is -1, it returns extended or external error information.  
_msg_key_ _$_ |  Message key to the Message Library file. String expression. If an **=**  _(equals sign)_ precedes the _msg_key_ _$_ in the function call, the _msg_key_ _$_ value is assumed to be the contents of the entry in the message. This allows for direct substitution within data strings.  
_oserrcode_ |  Optional operating system error code (from **GetLastError** Windows API call or **errno** under UNIX/Linux).  
_param1,_  
_param2, ..._ |  Optional parameters. You can use a list of values to replace the parameters stored in the message.  
_stmtref_ |  Program line number or statement label to which to transfer control.  
  
##  Returns

Text associated with given message number or key.

##  Description

The **MSG( )** function returns the text of the message whose number or key is specified. Use this function to obtain more information about errors generated by a program and to return information from your own message libraries.

Use the **DEF MSG** directive to temporarily override the **MSG( )** function.

#### **Note:**  
To permanently define different system messages for a different language, create a **_*mlfile.xx_** for a different language and use the ***msgupd** program to define all the messages. See **[Customizing System Messages for Different Languages](../PxPlus%20System%20Programs%20and%20Files/Message%20Library/Overview.htm#customizing)**.

Format 4 returns the operating system error message either for the current error condition (if no _oserrcode_ given) or for the error code specified.

##  See Also

[**DEF MSG Define Temporary Message**](../directives/def_msg.md)  
[**MESSAGE_LIB Establish Message Library**](../directives/message_lib.md)

##  Example

The following examples illustrate the different uses for the **MSG( )** function:

**_Example 1:_**

> 0010 open (1,err=1000)"PRINTR"  
>  0020 open (2,err=1000)"CUSTOM"  
>  0030 read (2,key="",err=1000)R$  
>  0040 ...  
>  1000 print "Could not open PRINTR",'LF',msg(ret)  
>  1010 stop

**_Example 2:_**

> keyed "MESSAGE.LIB",20,0,-256  
>  open (1)"MESSAGE.LIB"  
>  write record (1,key="NOCUST")"Sorry but Customer %1 is not valid"  
>  close (1)  
> message_lib "MESSAGE.LIB"  
>  print msg("NOCUST","0001")  
>   
>  Sorry but Customer 0001 is not valid

**_Example 3:_**

> ! Returns the current message library name, if any is in effect  
>  print msg(*)

**_Example 4:_**

Use this function to obtain the PxPlus error message associated with an error number:

> ?msg(14)  
>   
>  Error #14: Invalid I/O request for file state
